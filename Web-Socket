## API Protocol

The API is based on JSON RPC of Websocket protocol. Repeated subscription will be cancelled for the same data type.

**Request**

endpoint `wss://coinsbit.io/trade_ws`

- method: method，String
- params: parameters，Array
- id: Request id, Integer

**Response**

- result: Json object，null for failure
- error: Json object，null for success, non-null for failure
- id: Request id, Integer
1. code: error code
2. message: error message

**Notify**

- method: method，String
- params: parameters，Array
- id: Null

## Methods

**PING**

- method: server.ping
- params: None
- result: "pong"
- example: `{"method":"server.ping","params":[],"id":1000}`
- response: `{"error": null, "result": "pong", "id": 1000}`

**SYSTEM TIME**

- method: server.time
- params: none
- result: timestamp，Integer
- example: `{"method":"server.ping","params":[],"id":0}`
- response: `{"error": null, "result": 1493285895, "id": 1000}`

**MARKET SUBSCRIPTION**

- method: kline.subscribe
- params: market, interval
- example: `{"method":"kline.subscribe","params":["ETH_BTC",3600],"id":1000}`
- response: `{"method": "kline.update", "params": [[1568548260, "0.018302", "0.018302", "0.018302", "0.018302", "500", "15", "ETH_BTC"]], "id": null}`
- response params: `[ [
1568548260, time
"0.018302", open
"0.018302", close
"0.018302", highest
"0.018302", lowest
"500", volume
"15", amount
"ETH_BTC" market name ] ... ]`

**CANCEL SUBSCRIPTION**

- method: kline.unsubscribe
- params: none
- example: `{"method":"kline.unsubscribe","params":[],"id":1000}`

**LATEST PRICE SUBSCRIPTION**

- method: price.subscribe
- params: market list
- example: `{"method":"price.subscribe","params":["ETH_BTC","BTC_USD"],"id":111}`
- response: `{"method":"price.update","params":["ETH_BTC","0.01860351"],"id":null}`
- response params: `[
"ETH_BTC", market
"0.01860351", price ]`

**CANCEL SUBSCRIPTION**

- method: price.unsubscribe
- params: none
- example: `{"method":"price.unsubscribe","params":[],"id":1000}`

**ACQUIRE MARKET STATUS**

- method: state.query
- params: market, period(cycle period，Integer, e.g. 86400 for last 24 hours)
- example: `{"method":"state.query","params":["ETH_BTC",86400],"id":111}`
- response: `{"result": {"period": 86400, "volume": "192238.62392908", "last": "0.018295", "open": "0.017526", "low": "0.0174", "close": "0.018295", "high": "0.02", "deal": "3479.25570915213257"}, "error": null, "id": 111}`

**MARKET 24H STATUS SUBSCRIPTION**

- method: state.subscribe
- params: market list
- example: `{"method":"state.subscribe","params":["ETH_BTC","BTC_USD"],"id":111}`
- response: `{"method": "state.update", "params": ["BTC_USD", {"period": 86400, "volume": "6790.57915338", "high": "11000", "last": "10396.62814071", "low": "10291.07", "open": "10391.60804021", "close": "10396.62814071", "deal": "70615366.739616700295163"}], "id": null}`

**CANCEL SUBSCRIPTION**

- method: state.unsubscribe
- params: none
- example: `{"method":"state.unsubscribe","params":[],"id":111}`

**LATEST ORDER LIST SUBSCRIPTION**

- method: deals.subscribe
- params: market list
- example: `{"method":"deals.subscribe","params":["ETH_BTC","BTC_USD"],"id":111}`
- response: `{"method": "deals.update", "params": ["BTC_USD", [{"type": "sell", "time": 1568556382.1329091, "id": 5478754, "amount": "4.9193309", "price": "10365.40703518"}]], "id": null}`

**CANCEL SUBSCRIPTION**

- method: deals.unsubscribe
- params: none
- example: `{"method":"deals.unsubscribe","params":[],"id":111}`

**DEPTH SUBSCRIPTION**

- method: depth.subscribe
- params: market, limit, interval
- example: `{"method":"depth.subscribe","params":["ETH_BTC",1,"0"],"id":111}`
- response: `{"method": "depth.update", "params": [true, {"asks": [["0.018519", "120.6"]], "bids": [["0.01806", "90.31637262"]]}, "ETH_BTC"], "id": null}`

**CANCEL SUBSCRIPTION**

- method: depth.unsubscribe
- params: none
- example: `{"method":"depth.unsubscribe","params":[],"id":111}`
